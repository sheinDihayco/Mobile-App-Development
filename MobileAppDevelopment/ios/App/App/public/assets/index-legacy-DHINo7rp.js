System.register(["./index-legacy-Bhx2LJLW.js","./index-legacy-bWGLu6PL.js"],(function(e,t){"use strict";var a,n,o,r,i,s,c,l,p,d,u,m,h,b,y,f,w,g,P,v,E,L,U,I;return{setters:[e=>{a=e.d,n=e.k,o=e.l,r=e.I,i=e.a,s=e.b,c=e.c,l=e.e,p=e.y,d=e.z,u=e.A,m=e.B,h=e.C,b=e._,y=e.g,f=e.w,w=e.r,g=e.o,P=e.h,v=e.i,E=e.j},e=>{L=e.W,U=e.a,I=e.r}],execute:function(){var t,R,C;!function(e){e.Prompt="PROMPT",e.Camera="CAMERA",e.Photos="PHOTOS"}(t||(t={})),function(e){e.Rear="REAR",e.Front="FRONT"}(R||(R={})),function(e){e.Uri="uri",e.Base64="base64",e.DataUrl="dataUrl"}(C||(C={}));class x extends L{async getPhoto(e){return new Promise((async(a,n)=>{if(e.webUseInput||e.source===t.Photos)this.fileInputExperience(e,a,n);else if(e.source===t.Prompt){let t=document.querySelector("pwa-action-sheet");t||(t=document.createElement("pwa-action-sheet"),document.body.appendChild(t)),t.header=e.promptLabelHeader||"Photo",t.cancelable=!1,t.options=[{title:e.promptLabelPhoto||"From Photos"},{title:e.promptLabelPicture||"Take Picture"}],t.addEventListener("onSelection",(async t=>{0===t.detail?this.fileInputExperience(e,a,n):this.cameraExperience(e,a,n)}))}else this.cameraExperience(e,a,n)}))}async pickImages(e){return new Promise((async(e,t)=>{this.multipleFileInputExperience(e,t)}))}async cameraExperience(e,t,a){if(customElements.get("pwa-camera-modal")){const o=document.createElement("pwa-camera-modal");o.facingMode=e.direction===R.Front?"user":"environment",document.body.appendChild(o);try{await o.componentOnReady(),o.addEventListener("onPhoto",(async n=>{const r=n.detail;null===r?a(new U("User cancelled photos app")):r instanceof Error?a(r):t(await this._getCameraPhoto(r,e)),o.dismiss(),document.body.removeChild(o)})),o.present()}catch(n){this.fileInputExperience(e,t,a)}}else console.error("Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/web/pwa-elements."),this.fileInputExperience(e,t,a)}fileInputExperience(e,a,n){let o=document.querySelector("#_capacitor-camera-input");const r=()=>{var e;null===(e=o.parentNode)||void 0===e||e.removeChild(o)};o||(o=document.createElement("input"),o.id="_capacitor-camera-input",o.type="file",o.hidden=!0,document.body.appendChild(o),o.addEventListener("change",(t=>{const n=o.files[0];let i="jpeg";if("image/png"===n.type?i="png":"image/gif"===n.type&&(i="gif"),"dataUrl"===e.resultType||"base64"===e.resultType){const t=new FileReader;t.addEventListener("load",(()=>{if("dataUrl"===e.resultType)a({dataUrl:t.result,format:i});else if("base64"===e.resultType){const e=t.result.split(",")[1];a({base64String:e,format:i})}r()})),t.readAsDataURL(n)}else a({webPath:URL.createObjectURL(n),format:i}),r()})),o.addEventListener("cancel",(e=>{n(new U("User cancelled photos app")),r()}))),o.accept="image/*",o.capture=!0,e.source===t.Photos||e.source===t.Prompt?o.removeAttribute("capture"):e.direction===R.Front?o.capture="user":e.direction===R.Rear&&(o.capture="environment"),o.click()}multipleFileInputExperience(e,t){let a=document.querySelector("#_capacitor-camera-input-multiple");const n=()=>{var e;null===(e=a.parentNode)||void 0===e||e.removeChild(a)};a||(a=document.createElement("input"),a.id="_capacitor-camera-input-multiple",a.type="file",a.hidden=!0,a.multiple=!0,document.body.appendChild(a),a.addEventListener("change",(t=>{const o=[];for(let e=0;e<a.files.length;e++){const t=a.files[e];let n="jpeg";"image/png"===t.type?n="png":"image/gif"===t.type&&(n="gif"),o.push({webPath:URL.createObjectURL(t),format:n})}e({photos:o}),n()})),a.addEventListener("cancel",(e=>{t(new U("User cancelled photos app")),n()}))),a.accept="image/*",a.click()}_getCameraPhoto(e,t){return new Promise(((a,n)=>{const o=new FileReader,r=e.type.split("/")[1];"uri"===t.resultType?a({webPath:URL.createObjectURL(e),format:r,saved:!1}):(o.readAsDataURL(e),o.onloadend=()=>{const e=o.result;"dataUrl"===t.resultType?a({dataUrl:e,format:r,saved:!1}):a({base64String:e.split(",")[1],format:r,saved:!1})},o.onerror=e=>{n(e)})}))}async checkPermissions(){if("undefined"==typeof navigator||!navigator.permissions)throw this.unavailable("Permissions API not available in this browser");try{return{camera:(await window.navigator.permissions.query({name:"camera"})).state,photos:"granted"}}catch(e){throw this.unavailable("Camera permissions are not available in this browser")}}async requestPermissions(){throw this.unimplemented("Not implemented on web.")}async pickLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}async getLimitedLibraryPhotos(){throw this.unavailable("Not implemented on web.")}}new x;const T=I("Camera",{web:()=>new x}),k=a({name:"cameraScreen",components:{IonBackButton:n,IonButtons:o,IonToolbar:r,IonTitle:i,IonHeader:s,IonPage:c,IonContent:l,IonIcon:p,IonRouterOutlet:d},data:()=>({}),methods:{async takePhoto(){(await T.getPhoto({quality:90,allowEditing:!0,resultType:C.Uri})).webPath}},setup:()=>({menu:u,home:m,person:h})}),_={class:"p-3"};e("default",b(k,[["render",function(e,t,a,n,o,r){const i=w("ion-back-button"),s=w("ion-buttons"),c=w("ion-title"),l=w("ion-toolbar"),p=w("ion-header"),d=w("ion-content"),u=w("ion-page");return g(),y(u,null,{default:f((()=>[P(p,null,{default:f((()=>[P(l,{color:"primary"},{default:f((()=>[P(s,{slot:"start"},{default:f((()=>[P(i)])),_:1}),P(c,null,{default:f((()=>t[1]||(t[1]=[v(" Camera ")]))),_:1})])),_:1})])),_:1}),P(d,null,{default:f((()=>[E("div",_,[E("button",{class:"btn btn-primary btn-lg w-100",onClick:t[0]||(t[0]=t=>e.takePhoto())}," Take a Photo ")])])),_:1})])),_:1})}]]))}}}));
